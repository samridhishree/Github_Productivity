"rectype","issueid","project_owner","project_name","actor","time","text","action","title"
"issue_title","1318","nilearn","nilearn","VictorDel","2016-10-27 10:39:17","Hi, 
I've been using **plotting.find_xyz_cut_coords** for some time now and I just ran into what looks like a dataype issue. It seems to have trouble with a 4D FLOAT nifti file (iterated through **image.iter_img**). This file was generated using **image.concat_img** from 3D S32 files. So it lookes like **image.concat_img** changed the data type, is that possible?
I believe the issue with **plotting.find_xyz_cut_coords** is due to the data type since I solved my problem by just converting it to S32 (with brainvisa AimsFileConvert)
Could there be something else there?
Cheers

[AVCnn_4D_networks_FLOAT.nii.tar.gz](https://github.com/nilearn/nilearn/files/555508/AVCnn_4D_networks_FLOAT.nii.tar.gz)
[AVCnn_4D_networks_S32.nii.tar.gz](https://github.com/nilearn/nilearn/files/555509/AVCnn_4D_networks_S32.nii.tar.gz)

``` python
from nilearn import image
from nilearn import plotting

ref_atlas =  '/neurospin/grip/protocols/MRI/Resting_state_Victor_2014/atlases/atlas_fonctionel_control_AVCnn/AVCnn_4D_networks_FLOAT.nii'
coords=[plotting.find_xyz_cut_coords(roi)for roi in image.iter_img(ref_atlas)]
print('datatype = FLOAT\n')
print(coords,'\n')

ref_atlas =  '/neurospin/grip/protocols/MRI/Resting_state_Victor_2014/atlases/atlas_fonctionel_control_AVCnn/AVCnn_4D_networks_S32.nii'
coords=[plotting.find_xyz_cut_coords(roi)for roi in image.iter_img(ref_atlas)]
print('datatype = S32\n')
print(coords)
```

```
datatype = FLOAT

[array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5]), array([ 30.5,  36.5,  30.5])] 

datatype = S32

[[52.13559322033899, 6.92090395480227, -0.7344632768361521], [-52.3170731707317, -23.96987087517934, 21.473457675753224], [-49.53776978417267, 0.19424460431653756, 1.7104316546762561], [-53.63358778625954, 3.263358778625957, 19.55725190839695], [56.030973451327434, 7.154867256637175, 18.11946902654867], [51.552399608227226, -22.237022526934368, 19.67776689520079], [-55.19811320754718, -36.0, 1.4716981132075517], [55.481327800829874, -34.531120331950206, 1.8049792531120374], [-41.83289124668437, 26.092838196286493, -12.755968169761275], [-52.28967642526965, -10.705701078582436, -16.516178736517723], [52.59798994974875, -4.105527638190949, -19.457286432160807], [42.35222672064778, 32.0161943319838, -11.81781376518218], [-14.299009900990086, -9.19009900990099, 64.19999999999999], [5.7954545454545325, -12.88636363636364, 64.39090909090908], [-45.994609164420496, -9.824797843665763, 44.53908355795147], [48.36962750716332, -4.968481375358181, 43.84813753581662], [-22.593900481540942, -37.16051364365971, 64.75762439807383], [27.40119760479042, -33.61077844311376, 64.89820359281435], [-27.611842105263165, 23.76315789473682, 45.44078947368422], [-41.98792756539237, -62.70422535211267, 32.36619718309859], [-35.63937282229966, 25.63066202090593, 3.224738675958193], [-41.39106145251395, -53.72067039106145, 43.93296089385474], [26.67870967741935, 27.030967741935484, 45.99483870967741], [48.390957446808514, -56.56914893617021, 31.35638297872339], [37.902702702702705, 36.47567567567569, 27.118918918918922], [45.83582089552239, -50.13930348258707, 43.94029850746267], [-22.703549060542798, -6.598121085594997, -0.5260960334029221], [23.449603624009058, -7.0973952434881085, 2.3952434881087186], [23.1694214876033, -0.16115702479339689, -9.38429752066115], [-25.493775933609953, -35.11618257261411, -11.128630705394194], [-11.13944223107569, 49.50996015936255, 17.820717131474098], [11.192691029900331, 49.53820598006644, 19.265780730897006], [-27.07058823529411, -16.78823529411764, -19.05882352941176], [28.91402714932127, -11.361990950226243, -18.76018099547511], [6.095022624434392, 44.3212669683258, -10.072398190045249], [12.116197183098592, -70.80633802816901, 43.61619718309859], [-6.513011152416354, -51.07063197026022, 32.855018587360604], [8.006648936170208, -51.21941489361703, 32.75664893617021], [-15.91242603550296, -52.04378698224852, 53.74792899408283], [16.11325301204819, -51.527710843373484, 54.56024096385542], [10.412825651302612, -80.89779559118236, 19.923847695390776], [-11.33076923076922, -52.65230769230769, 10.103076923076927], [-8.81214421252372, -77.03225806451613, 1.8842504743833075], [-7.255965292841665, -83.16052060737528, 19.392624728850322], [13.486607142857139, -50.41964285714286, 10.888392857142861], [-28.488549618320604, -75.2267175572519, -9.361832061068696], [-29.63013698630138, -89.2876712328767, 4.027397260273972], [31.34972341733252, -72.22864167178857, -7.591272280270431], [-21.83865814696486, -57.57987220447285, -6.244408945686899], [-26.758139534883725, -82.52093023255814, 18.846511627906978], [31.33920704845815, -77.59911894273128, 20.68281938325991], [17.392953929539303, -62.98915989159892, -1.298102981029814], [-21.246212121212125, -69.52651515151516, 40.136363636363626], [23.817891373801913, -6.728434504792332, 63.00958466453673], [29.4321608040201, -65.84422110552764, 40.658291457286424], [-43.31954887218046, 10.353383458646618, 32.18796992481204], [-42.25764192139738, -35.851528384279476, 45.165938864628814], [43.350415512465375, -33.91412742382272, 46.0180055401662], [44.82945736434108, 13.317829457364326, 31.51162790697674], [-5.091954022988517, 28.643678160919535, 45.517241379310335], [-5.213114754098356, 1.7845433255269256, 44.747072599531606], [7.4334677419354875, -0.04233870967742348, 44.63709677419354], [-38.78532110091743, 34.2880733944954, 26.152293577981652], [38.35853976531942, 29.1903520208605, 3.3207301173402897], [-30.991525423728802, 2.4279661016949206, 11.186440677966104]]
```

``` python

```
","start issue","plotting.find_xyz_cut_coords FLOAT datatype supported ?"
"issue_closed","1318","nilearn","nilearn","GaelVaroquaux","2017-11-06 21:06:09","","closed issue","plotting.find_xyz_cut_coords FLOAT datatype supported ?"
"issue_comment","1318","nilearn","nilearn","VictorDel","2016-10-28 13:10:35","Thanks for the answer!
And the reason why plotting.plot_roi managed to find the right cuts for display with both files, would be that it recalculates the threshold at l.162 in img_plotting ?
Any idea on the data type change using image.concat_img? (I did not do that step personnaly though I can say 200% sure that nothing else was done).
","",""
