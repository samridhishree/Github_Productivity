,rectype,issueid,project_owner,project_name,actor,time,text,action,title
0,issue_title,238,aio-libs,aioredis,pyup-bot,2017-05-31 12:24:39,"
There's a new version of [pytest](https://pypi.python.org/pypi/pytest) available.
You are currently using **3.1.0**. I have updated it to **3.1.1**



These links might come in handy:  <a href=""https://pypi.python.org/pypi/pytest"">PyPI</a> | <a href=""https://pyup.io/changelogs/pytest/"">Changelog</a> | <a href=""https://github.com/pytest-dev/pytest/issues"">Repo</a> | <a href=""http://pytest.org"">Homepage</a> 



### Changelog
> 
>### 3.1.1

>=========================

>Bug Fixes
>---------

>- pytest warning capture no longer overrides existing warning filters. The
>  previous behaviour would override all filters and caused regressions in test
>  suites which configure warning filters to match their needs. Note that as a
>  side-effect of this is that ``DeprecationWarning`` and
>  ``PendingDeprecationWarning`` are no longer shown by default. (2430)

>- Fix issue with non-ascii contents in doctest text files. (2434)

>- Fix encoding errors for unicode warnings in Python 2. (2436)

>- ``pytest.deprecated_call`` now captures ``PendingDeprecationWarning`` in
>  context manager form. (2441)


>Improved Documentation
>----------------------

>- Addition of towncrier for changelog management. (2390)








*Got merge conflicts? Close this PR and delete the branch. I'll create a new PR for you.*

Happy merging! ðŸ¤–
",start issue,Update pytest to 3.1.1
1,issue_closed,238,aio-libs,aioredis,pyup-bot,2017-06-09 11:55:19,,closed issue,Update pytest to 3.1.1
2,pull_request_title,238,aio-libs,aioredis,pyup-bot,2017-05-31 12:24:39,"
There's a new version of [pytest](https://pypi.python.org/pypi/pytest) available.
You are currently using **3.1.0**. I have updated it to **3.1.1**



These links might come in handy:  <a href=""https://pypi.python.org/pypi/pytest"">PyPI</a> | <a href=""https://pyup.io/changelogs/pytest/"">Changelog</a> | <a href=""https://github.com/pytest-dev/pytest/issues"">Repo</a> | <a href=""http://pytest.org"">Homepage</a> 



### Changelog
> 
>### 3.1.1

>=========================

>Bug Fixes
>---------

>- pytest warning capture no longer overrides existing warning filters. The
>  previous behaviour would override all filters and caused regressions in test
>  suites which configure warning filters to match their needs. Note that as a
>  side-effect of this is that ``DeprecationWarning`` and
>  ``PendingDeprecationWarning`` are no longer shown by default. (2430)

>- Fix issue with non-ascii contents in doctest text files. (2434)

>- Fix encoding errors for unicode warnings in Python 2. (2436)

>- ``pytest.deprecated_call`` now captures ``PendingDeprecationWarning`` in
>  context manager form. (2441)


>Improved Documentation
>----------------------

>- Addition of towncrier for changelog management. (2390)








*Got merge conflicts? Close this PR and delete the branch. I'll create a new PR for you.*

Happy merging! ðŸ¤–
",f821ff1acb2caeb038edd1a2a7c015cc505f283d,Update pytest to 3.1.1
3,issue_comment,238,aio-libs,aioredis,codecov-io,2017-05-31 14:53:14,"# [Codecov](https://codecov.io/gh/aio-libs/aioredis/pull/238?src=pr&el=h1) Report
> Merging [#238](https://codecov.io/gh/aio-libs/aioredis/pull/238?src=pr&el=desc) into [master](https://codecov.io/gh/aio-libs/aioredis/commit/a9c386d525949bbd6d213e24b930ba0a102a1138?src=pr&el=desc) will **decrease** coverage by `0.16%`.
> The diff coverage is `n/a`.

[![Impacted file tree graph](https://codecov.io/gh/aio-libs/aioredis/pull/238/graphs/tree.svg?width=650&height=150&src=pr&token=THCDhqngRB)](https://codecov.io/gh/aio-libs/aioredis/pull/238?src=pr&el=tree)

```diff
@@            Coverage Diff            @@
##           master    #238      +/-   ##
=========================================
- Coverage   96.97%   96.8%   -0.17%     
=========================================
  Files          55      55              
  Lines        7492    7492              
  Branches      625     625              
=========================================
- Hits         7265    7253      -12     
- Misses        168     178      +10     
- Partials       59      61       +2
```


| [Impacted Files](https://codecov.io/gh/aio-libs/aioredis/pull/238?src=pr&el=tree) | Coverage Î” | |
|---|---|---|
| [aioredis/sentinel/pool.py](https://codecov.io/gh/aio-libs/aioredis/pull/238?src=pr&el=tree#diff-YWlvcmVkaXMvc2VudGluZWwvcG9vbC5weQ==) | `87.2% <0%> (-2.94%)` | :arrow_down: |
| [tests/sentinel\_failover\_test.py](https://codecov.io/gh/aio-libs/aioredis/pull/238?src=pr&el=tree#diff-dGVzdHMvc2VudGluZWxfZmFpbG92ZXJfdGVzdC5weQ==) | `87.96% <0%> (-0.76%)` | :arrow_down: |

------

[Continue to review full report at Codecov](https://codecov.io/gh/aio-libs/aioredis/pull/238?src=pr&el=continue).
> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)
> `Î” = absolute <relative> (impact)`, `Ã¸ = not affected`, `? = missing data`
> Powered by [Codecov](https://codecov.io/gh/aio-libs/aioredis/pull/238?src=pr&el=footer). Last update [a9c386d...f821ff1](https://codecov.io/gh/aio-libs/aioredis/pull/238?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).
",,
4,issue_comment,238,aio-libs,aioredis,pyup-bot,2017-06-09 11:55:19,Closing this in favor of #243,,
5,pull_request_commit,238,aio-libs,aioredis,pyup-bot,2017-05-31 12:24:37,Update pytest from 3.1.0 to 3.1.1,f821ff1acb2caeb038edd1a2a7c015cc505f283d,
0,issue_title,239,aio-libs,aioredis,argaen,2017-06-05 14:29:53,,start issue,close_waiter is lazily created
1,issue_closed,239,aio-libs,aioredis,popravich,2017-06-08 20:27:47,,closed issue,close_waiter is lazily created
2,pull_request_title,239,aio-libs,aioredis,argaen,2017-06-05 14:29:53,,6e7ea11cb05ef371bd35a28cedbf7cca6334be7e,close_waiter is lazily created
3,pull_request_merged,239,aio-libs,aioredis,popravich,2017-06-08 20:27:47,close_waiter is lazily created,46e0f48ca41f9e594719ff733d2427c393e40f46,Pull request merge from argaen/aioredis:pool_close_warning_#236 to aio-libs/aioredis:master
4,issue_comment,239,aio-libs,aioredis,codecov-io,2017-06-05 14:43:29,"# [Codecov](https://codecov.io/gh/aio-libs/aioredis/pull/239?src=pr&el=h1) Report
> Merging [#239](https://codecov.io/gh/aio-libs/aioredis/pull/239?src=pr&el=desc) into [master](https://codecov.io/gh/aio-libs/aioredis/commit/a9c386d525949bbd6d213e24b930ba0a102a1138?src=pr&el=desc) will **decrease** coverage by `0.05%`.
> The diff coverage is `100%`.

[![Impacted file tree graph](https://codecov.io/gh/aio-libs/aioredis/pull/239/graphs/tree.svg?token=THCDhqngRB&src=pr&height=150&width=650)](https://codecov.io/gh/aio-libs/aioredis/pull/239?src=pr&el=tree)

```diff
@@            Coverage Diff             @@
##           master     #239      +/-   ##
==========================================
- Coverage   96.97%   96.91%   -0.06%     
==========================================
  Files          55       55              
  Lines        7492     7379     -113     
  Branches      625      582      -43     
==========================================
- Hits         7265     7151     -114     
  Misses        168      168              
- Partials       59       60       +1
```


| [Impacted Files](https://codecov.io/gh/aio-libs/aioredis/pull/239?src=pr&el=tree) | Coverage Î” | |
|---|---|---|
| [tests/pool\_test.py](https://codecov.io/gh/aio-libs/aioredis/pull/239?src=pr&el=tree#diff-dGVzdHMvcG9vbF90ZXN0LnB5) | `98.24% <100%> (Ã¸)` | :arrow_up: |
| [aioredis/sentinel/pool.py](https://codecov.io/gh/aio-libs/aioredis/pull/239?src=pr&el=tree#diff-YWlvcmVkaXMvc2VudGluZWwvcG9vbC5weQ==) | `86.42% <100%> (-3.71%)` | :arrow_down: |
| [tests/sentinel\_failover\_test.py](https://codecov.io/gh/aio-libs/aioredis/pull/239?src=pr&el=tree#diff-dGVzdHMvc2VudGluZWxfZmFpbG92ZXJfdGVzdC5weQ==) | `87.21% <0%> (-1.51%)` | :arrow_down: |
| [aioredis/commands/pubsub.py](https://codecov.io/gh/aio-libs/aioredis/pull/239?src=pr&el=tree#diff-YWlvcmVkaXMvY29tbWFuZHMvcHVic3ViLnB5) | `95.85% <0%> (-0.36%)` | :arrow_down: |
| [aioredis/sentinel/\_\_init\_\_.py](https://codecov.io/gh/aio-libs/aioredis/pull/239?src=pr&el=tree#diff-YWlvcmVkaXMvc2VudGluZWwvX19pbml0X18ucHk=) | `100% <0%> (Ã¸)` | :arrow_up: |
| [aioredis/commands/server.py](https://codecov.io/gh/aio-libs/aioredis/pull/239?src=pr&el=tree#diff-YWlvcmVkaXMvY29tbWFuZHMvc2VydmVyLnB5) | `85.23% <0%> (+1.34%)` | :arrow_up: |

------

[Continue to review full report at Codecov](https://codecov.io/gh/aio-libs/aioredis/pull/239?src=pr&el=continue).
> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)
> `Î” = absolute <relative> (impact)`, `Ã¸ = not affected`, `? = missing data`
> Powered by [Codecov](https://codecov.io/gh/aio-libs/aioredis/pull/239?src=pr&el=footer). Last update [a9c386d...6e7ea11](https://codecov.io/gh/aio-libs/aioredis/pull/239?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).
",,
5,issue_comment,239,aio-libs,aioredis,popravich,2017-06-08 20:27:04,Thanks,,
6,pull_request_commit_comment,239,aio-libs,aioredis,popravich,2017-06-07 12:17:43,"I think this method can be simplified to look like this
```python
@asyncio.coroutine
def wait_closed(self):
    yield from self._close_state.wait()
    assert self._close_waiter is not None
    yield from asyncio.shield(self._close_waiter, loop=self._loop)
```",6e7ea11cb05ef371bd35a28cedbf7cca6334be7e,"(None, '', u'aioredis/pool.py')"
7,pull_request_commit_comment,239,aio-libs,aioredis,popravich,2017-06-07 12:42:48,"Otherwise you should add check `if self._close_waiter is None` in `close()` method.
This also applies to sentinel pool.",6e7ea11cb05ef371bd35a28cedbf7cca6334be7e,"(None, '', u'aioredis/pool.py')"
8,pull_request_commit_comment,239,aio-libs,aioredis,argaen,2017-06-08 17:18:40,"I don't get your point there.

If `close` is called first, it will create the `self._close_waiter` task

If `wait_closed` is called first, it will create the self._close_waiter` and then wait until `close_state` is set",6e7ea11cb05ef371bd35a28cedbf7cca6334be7e,"(None, '', u'aioredis/pool.py')"
9,pull_request_commit_comment,239,aio-libs,aioredis,popravich,2017-06-08 18:08:48,"Yes, but it (`wait_closed`) will wait until `_close_state` is set, which is called from `close()`,
and so `_close_waiter` will be replaced with new task from `close`.",6e7ea11cb05ef371bd35a28cedbf7cca6334be7e,"(None, '', u'aioredis/pool.py')"
10,pull_request_commit_comment,239,aio-libs,aioredis,popravich,2017-06-08 18:09:17,...two tasks will try to close pool,6e7ea11cb05ef371bd35a28cedbf7cca6334be7e,"(None, '', u'aioredis/pool.py')"
11,pull_request_commit_comment,239,aio-libs,aioredis,argaen,2017-06-08 18:15:16,"ah True that, I'll update the code",6e7ea11cb05ef371bd35a28cedbf7cca6334be7e,"(None, '', u'aioredis/pool.py')"
12,pull_request_commit,239,aio-libs,aioredis,argaen,2017-06-05 14:26:22,close_waiter is lazily created,347d32bb8a8112635416eb69f3df8065a50d2c4a,
13,pull_request_commit,239,aio-libs,aioredis,argaen,2017-06-08 18:40:44,Create only one task for closing,6e7ea11cb05ef371bd35a28cedbf7cca6334be7e,
0,issue_title,236,aio-libs,aioredis,argaen,2017-05-26 22:09:44,"When finishing executing tests or any program that uses aioredis, it usually shows 

```
2017-05-26 23:56:44,614 ERROR asyncio(1148) | Task was destroyed but it is pending!
task: <Task pending coro=<RedisPool._do_close() running at /home/blck/.pyenv/versions/3.5.2/envs/aiocache/lib/python3.5/site-packages/aioredis/pool.py:117> wait_for=<Future pending cb=[Task._wakeup()]>>
```

This is basically because the pool wasn't closed before exiting and the task is still pending (https://github.com/aio-libs/aioredis/blob/master/aioredis/pool.py#L82).

This warning still appears even when all connections in the pool are closed (because someone called `clear` or because there are no connections). IMO the warning should appear only when the program exits while there were resources allocated (i.e. connections) rather than doing it by default.

Are you OK if I provide a MR fixing that?",start issue,Pool not closed warning
1,issue_closed,236,aio-libs,aioredis,popravich,2017-06-08 20:27:48,,closed issue,Pool not closed warning
2,issue_comment,236,aio-libs,aioredis,popravich,2017-05-31 19:04:37,"Oh, I can't remember why I made it work this way, I guess there was a reason for this.
Currently when pool is created it starts async task waiting for ""close"" event to be set and
close & drop all connections (including connections in use).
I think this can be fixed to only set event flag and start this task from `close()` method.",,
3,issue_comment,236,aio-libs,aioredis,argaen,2017-06-01 07:34:50,"Yup, that was my intention. I'll provide a MR with the changes",,
4,issue_comment,236,aio-libs,aioredis,popravich,2017-06-01 07:35:53,ok,,
0,issue_title,240,aio-libs,aioredis,pfreixes,2017-06-07 14:55:00,"Both factories to create a new pool and new connections allow to the
developer pass as a kw an alternative class. Developers can develop
their own pools or connection classes inheriting from the official one
and implementing ad-hoc functionalities.",start issue,Allow inject a pool class and connection class
1,issue_closed,240,aio-libs,aioredis,popravich,2017-06-09 12:02:06,,closed issue,Allow inject a pool class and connection class
2,pull_request_title,240,aio-libs,aioredis,pfreixes,2017-06-07 14:55:00,"Both factories to create a new pool and new connections allow to the
developer pass as a kw an alternative class. Developers can develop
their own pools or connection classes inheriting from the official one
and implementing ad-hoc functionalities.",cdfe3863c89d8961ffa4acac32844915125bca87,Allow inject a pool class and connection class
3,pull_request_merged,240,aio-libs,aioredis,popravich,2017-06-09 12:02:06,Allow inject a pool class and connection class,83fcf0653c37739abcc4a71fc79b00789cfc5165,Pull request merge from pfreixes/aioredis:pool_class_connection_class to aio-libs/aioredis:master
4,issue_comment,240,aio-libs,aioredis,codecov-io,2017-06-07 15:30:43,"# [Codecov](https://codecov.io/gh/aio-libs/aioredis/pull/240?src=pr&el=h1) Report
> Merging [#240](https://codecov.io/gh/aio-libs/aioredis/pull/240?src=pr&el=desc) into [master](https://codecov.io/gh/aio-libs/aioredis/commit/a9c386d525949bbd6d213e24b930ba0a102a1138?src=pr&el=desc) will **decrease** coverage by `0.03%`.
> The diff coverage is `100%`.

[![Impacted file tree graph](https://codecov.io/gh/aio-libs/aioredis/pull/240/graphs/tree.svg?height=150&src=pr&token=THCDhqngRB&width=650)](https://codecov.io/gh/aio-libs/aioredis/pull/240?src=pr&el=tree)

```diff
@@            Coverage Diff             @@
##           master     #240      +/-   ##
==========================================
- Coverage   96.97%   96.93%   -0.04%     
==========================================
  Files          55       55              
  Lines        7492     7405      -87     
  Branches      625      584      -41     
==========================================
- Hits         7265     7178      -87     
- Misses        168      169       +1     
+ Partials       59       58       -1
```


| [Impacted Files](https://codecov.io/gh/aio-libs/aioredis/pull/240?src=pr&el=tree) | Coverage Î” | |
|---|---|---|
| [tests/pool\_test.py](https://codecov.io/gh/aio-libs/aioredis/pull/240?src=pr&el=tree#diff-dGVzdHMvcG9vbF90ZXN0LnB5) | `98.29% <100%> (+0.05%)` | :arrow_up: |
| [tests/connection\_test.py](https://codecov.io/gh/aio-libs/aioredis/pull/240?src=pr&el=tree#diff-dGVzdHMvY29ubmVjdGlvbl90ZXN0LnB5) | `100% <100%> (Ã¸)` | :arrow_up: |
| [aioredis/sentinel/pool.py](https://codecov.io/gh/aio-libs/aioredis/pull/240?src=pr&el=tree#diff-YWlvcmVkaXMvc2VudGluZWwvcG9vbC5weQ==) | `86.66% <0%> (-3.47%)` | :arrow_down: |
| [tests/sentinel\_failover\_test.py](https://codecov.io/gh/aio-libs/aioredis/pull/240?src=pr&el=tree#diff-dGVzdHMvc2VudGluZWxfZmFpbG92ZXJfdGVzdC5weQ==) | `87.96% <0%> (-0.76%)` | :arrow_down: |
| [aioredis/commands/pubsub.py](https://codecov.io/gh/aio-libs/aioredis/pull/240?src=pr&el=tree#diff-YWlvcmVkaXMvY29tbWFuZHMvcHVic3ViLnB5) | `95.85% <0%> (-0.36%)` | :arrow_down: |
| [aioredis/sentinel/\_\_init\_\_.py](https://codecov.io/gh/aio-libs/aioredis/pull/240?src=pr&el=tree#diff-YWlvcmVkaXMvc2VudGluZWwvX19pbml0X18ucHk=) | `100% <0%> (Ã¸)` | :arrow_up: |
| [examples/py34/connection.py](https://codecov.io/gh/aio-libs/aioredis/pull/240?src=pr&el=tree#diff-ZXhhbXBsZXMvcHkzNC9jb25uZWN0aW9uLnB5) | `93.18% <0%> (+0.11%)` | :arrow_up: |
| [aioredis/commands/server.py](https://codecov.io/gh/aio-libs/aioredis/pull/240?src=pr&el=tree#diff-YWlvcmVkaXMvY29tbWFuZHMvc2VydmVyLnB5) | `85.23% <0%> (+1.34%)` | :arrow_up: |

------

[Continue to review full report at Codecov](https://codecov.io/gh/aio-libs/aioredis/pull/240?src=pr&el=continue).
> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)
> `Î” = absolute <relative> (impact)`, `Ã¸ = not affected`, `? = missing data`
> Powered by [Codecov](https://codecov.io/gh/aio-libs/aioredis/pull/240?src=pr&el=footer). Last update [a9c386d...cdfe386](https://codecov.io/gh/aio-libs/aioredis/pull/240?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).
",,
5,issue_comment,240,aio-libs,aioredis,popravich,2017-06-09 12:02:09,Thanks,,
6,pull_request_commit_comment,240,aio-libs,aioredis,popravich,2017-06-09 09:36:09,"You must check that `connection_cls` is subclass of `aioredis.abc.AbcConnection`.
Please add this check before opening connection otherwise (if check fails) you'd need to close reader/writer.",cdfe3863c89d8961ffa4acac32844915125bca87,"(None, '', u'aioredis/connection.py')"
7,pull_request_commit_comment,240,aio-libs,aioredis,popravich,2017-06-09 09:41:38,Also must check that `poo_cls` is a subclass of `abc.AbcPool`.,cdfe3863c89d8961ffa4acac32844915125bca87,"(None, '', u'aioredis/pool.py')"
8,pull_request_commit_comment,240,aio-libs,aioredis,pfreixes,2017-06-09 09:52:57,"should I modify the `RedisConnection` ? to:

```
class RedisConnection(AbcConnection):
...
```",cdfe3863c89d8961ffa4acac32844915125bca87,"(None, '', u'aioredis/connection.py')"
9,pull_request_commit_comment,240,aio-libs,aioredis,popravich,2017-06-09 09:53:46,"Oh, yes, thanks!",cdfe3863c89d8961ffa4acac32844915125bca87,"(None, '', u'aioredis/connection.py')"
10,pull_request_commit_comment,240,aio-libs,aioredis,pfreixes,2017-06-09 11:02:31,"done, thanks",cdfe3863c89d8961ffa4acac32844915125bca87,"(None, '', u'aioredis/connection.py')"
11,pull_request_commit_comment,240,aio-libs,aioredis,pfreixes,2017-06-09 11:04:24,"done, thanks.

Btw can you restart the Travis Job for an unknown reason the py35 environment failed the command `make examples`",cdfe3863c89d8961ffa4acac32844915125bca87,"(None, '', u'aioredis/pool.py')"
12,pull_request_commit,240,aio-libs,aioredis,pfreixes,2017-06-07 14:51:53,"Allow inject a pool class and connection class

Both factories to create a new pool and new connections allow to the
developer pass as a kw an alternative class. Developers can develop
their own pools or connection classes inheriting from the official one
and implementing ad-hoc functionalities.",6dbe74eb9c39ee44bfbaf202bcdf261bc21dddce,
13,pull_request_commit,240,aio-libs,aioredis,pfreixes,2017-06-07 15:30:23,Fixed flake8 issues,0c9e882d01faae8706143a9482e69a954f9b224c,
14,pull_request_commit,240,aio-libs,aioredis,pfreixes,2017-06-09 10:30:40,Check the pool/connection class param,cdfe3863c89d8961ffa4acac32844915125bca87,
0,issue_title,243,aio-libs,aioredis,pyup-bot,2017-06-09 11:55:15,"
There's a new version of [pytest](https://pypi.python.org/pypi/pytest) available.
You are currently using **3.1.0**. I have updated it to **3.1.2**



These links might come in handy:  <a href=""https://pypi.python.org/pypi/pytest"">PyPI</a> | <a href=""https://pyup.io/changelogs/pytest/"">Changelog</a> | <a href=""https://github.com/pytest-dev/pytest/issues"">Repo</a> | <a href=""http://pytest.org"">Homepage</a> 



### Changelog
> 
>### 3.1.2

>=========================

>Bug Fixes
>---------

>- Required options added via ``pytest_addoption`` will no longer prevent using
>  --help without passing them. (1999)

>- Respect ``python_files`` in assertion rewriting. (2121)

>- Fix recursion error detection when frames in the traceback contain objects
>  that can&#39;t be compared (like ``numpy`` arrays). (2459)

>- ``UnicodeWarning`` is issued from the internal pytest warnings plugin only
>  when the message contains non-ascii unicode (Python 2 only). (2463)

>- Added a workaround for Python 3.6 WindowsConsoleIO breaking due to Pytests&#39;s
>  FDCapture. Other code using console handles might still be affected by the
>  very same issue and might require further workarounds/fixes, i.e. colorama.
>  (2467)


>Improved Documentation
>----------------------

>- Fix internal API links to ``pluggy`` objects. (2331)

>- Make it clear that ``pytest.xfail`` stops test execution at the calling point
>  and improve overall flow of the ``skipping`` docs. (810)




>### 3.1.1

>=========================

>Bug Fixes
>---------

>- pytest warning capture no longer overrides existing warning filters. The
>  previous behaviour would override all filters and caused regressions in test
>  suites which configure warning filters to match their needs. Note that as a
>  side-effect of this is that ``DeprecationWarning`` and
>  ``PendingDeprecationWarning`` are no longer shown by default. (2430)

>- Fix issue with non-ascii contents in doctest text files. (2434)

>- Fix encoding errors for unicode warnings in Python 2. (2436)

>- ``pytest.deprecated_call`` now captures ``PendingDeprecationWarning`` in
>  context manager form. (2441)


>Improved Documentation
>----------------------

>- Addition of towncrier for changelog management. (2390)








*Got merge conflicts? Close this PR and delete the branch. I'll create a new PR for you.*

Happy merging! ðŸ¤–
",start issue,Update pytest to 3.1.2
1,issue_closed,243,aio-libs,aioredis,popravich,2017-06-21 09:31:06,,closed issue,Update pytest to 3.1.2
2,pull_request_title,243,aio-libs,aioredis,pyup-bot,2017-06-09 11:55:15,"
There's a new version of [pytest](https://pypi.python.org/pypi/pytest) available.
You are currently using **3.1.0**. I have updated it to **3.1.2**



These links might come in handy:  <a href=""https://pypi.python.org/pypi/pytest"">PyPI</a> | <a href=""https://pyup.io/changelogs/pytest/"">Changelog</a> | <a href=""https://github.com/pytest-dev/pytest/issues"">Repo</a> | <a href=""http://pytest.org"">Homepage</a> 



### Changelog
> 
>### 3.1.2

>=========================

>Bug Fixes
>---------

>- Required options added via ``pytest_addoption`` will no longer prevent using
>  --help without passing them. (1999)

>- Respect ``python_files`` in assertion rewriting. (2121)

>- Fix recursion error detection when frames in the traceback contain objects
>  that can&#39;t be compared (like ``numpy`` arrays). (2459)

>- ``UnicodeWarning`` is issued from the internal pytest warnings plugin only
>  when the message contains non-ascii unicode (Python 2 only). (2463)

>- Added a workaround for Python 3.6 WindowsConsoleIO breaking due to Pytests&#39;s
>  FDCapture. Other code using console handles might still be affected by the
>  very same issue and might require further workarounds/fixes, i.e. colorama.
>  (2467)


>Improved Documentation
>----------------------

>- Fix internal API links to ``pluggy`` objects. (2331)

>- Make it clear that ``pytest.xfail`` stops test execution at the calling point
>  and improve overall flow of the ``skipping`` docs. (810)




>### 3.1.1

>=========================

>Bug Fixes
>---------

>- pytest warning capture no longer overrides existing warning filters. The
>  previous behaviour would override all filters and caused regressions in test
>  suites which configure warning filters to match their needs. Note that as a
>  side-effect of this is that ``DeprecationWarning`` and
>  ``PendingDeprecationWarning`` are no longer shown by default. (2430)

>- Fix issue with non-ascii contents in doctest text files. (2434)

>- Fix encoding errors for unicode warnings in Python 2. (2436)

>- ``pytest.deprecated_call`` now captures ``PendingDeprecationWarning`` in
>  context manager form. (2441)


>Improved Documentation
>----------------------

>- Addition of towncrier for changelog management. (2390)








*Got merge conflicts? Close this PR and delete the branch. I'll create a new PR for you.*

Happy merging! ðŸ¤–
",f24400664da6be9d01aa72c93513c3bae8d0728e,Update pytest to 3.1.2
3,issue_comment,243,aio-libs,aioredis,pfreixes,2017-06-16 08:48:41,"@popravich just a _heisentest_ with Python 3.4, in my local works like a charm. deleting the branch will trigger another MR from @pyup-bot ?",,
4,issue_comment,243,aio-libs,aioredis,codecov[bot],2017-06-16 09:22:53,"# [Codecov](https://codecov.io/gh/aio-libs/aioredis/pull/243?src=pr&el=h1) Report
> Merging [#243](https://codecov.io/gh/aio-libs/aioredis/pull/243?src=pr&el=desc) into [master](https://codecov.io/gh/aio-libs/aioredis/commit/46e0f48ca41f9e594719ff733d2427c393e40f46?src=pr&el=desc) will **increase** coverage by `0.4%`.
> The diff coverage is `n/a`.

[![Impacted file tree graph](https://codecov.io/gh/aio-libs/aioredis/pull/243/graphs/tree.svg?src=pr&token=THCDhqngRB&width=650&height=150)](https://codecov.io/gh/aio-libs/aioredis/pull/243?src=pr&el=tree)

```diff
@@            Coverage Diff            @@
##           master     #243     +/-   ##
=========================================
+ Coverage   96.92%   97.33%   +0.4%     
=========================================
  Files          55       55             
  Lines        7379     7832    +453     
  Branches      582      677     +95     
=========================================
+ Hits         7152     7623    +471     
+ Misses        169      158     -11     
+ Partials       58       51      -7
```


| [Impacted Files](https://codecov.io/gh/aio-libs/aioredis/pull/243?src=pr&el=tree) | Coverage Î” | |
|---|---|---|
| [tests/connection\_test.py](https://codecov.io/gh/aio-libs/aioredis/pull/243?src=pr&el=tree#diff-dGVzdHMvY29ubmVjdGlvbl90ZXN0LnB5) | `100% <0%> (Ã¸)` | :arrow_up: |
| [tests/pool\_test.py](https://codecov.io/gh/aio-libs/aioredis/pull/243?src=pr&el=tree#diff-dGVzdHMvcG9vbF90ZXN0LnB5) | `99.28% <0%> (+1.03%)` | :arrow_up: |
| [aioredis/commands/server.py](https://codecov.io/gh/aio-libs/aioredis/pull/243?src=pr&el=tree#diff-YWlvcmVkaXMvY29tbWFuZHMvc2VydmVyLnB5) | `85.23% <0%> (+1.34%)` | :arrow_up: |
| [aioredis/sentinel/pool.py](https://codecov.io/gh/aio-libs/aioredis/pull/243?src=pr&el=tree#diff-YWlvcmVkaXMvc2VudGluZWwvcG9vbC5weQ==) | `90.35% <0%> (+3.92%)` | :arrow_up: |
| [examples/py34/connection.py](https://codecov.io/gh/aio-libs/aioredis/pull/243?src=pr&el=tree#diff-ZXhhbXBsZXMvcHkzNC9jb25uZWN0aW9uLnB5) | `98.45% <0%> (+5.05%)` | :arrow_up: |

------

[Continue to review full report at Codecov](https://codecov.io/gh/aio-libs/aioredis/pull/243?src=pr&el=continue).
> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)
> `Î” = absolute <relative> (impact)`, `Ã¸ = not affected`, `? = missing data`
> Powered by [Codecov](https://codecov.io/gh/aio-libs/aioredis/pull/243?src=pr&el=footer). Last update [46e0f48...f244006](https://codecov.io/gh/aio-libs/aioredis/pull/243?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).
",,
5,pull_request_commit,243,aio-libs,aioredis,pyup-bot,2017-06-09 11:55:14,Update pytest from 3.1.0 to 3.1.2,f24400664da6be9d01aa72c93513c3bae8d0728e,
0,issue_title,241,aio-libs,aioredis,pfreixes,2017-06-07 21:06:54,"Copied and adapted code from the PR pending to be merged yet [1]

[1] https://github.com/python/cpython/pull/1031",start issue,#231 Patch for the cpython issue with Lock bpo-27585
1,issue_closed,241,aio-libs,aioredis,popravich,2017-06-21 06:46:50,,closed issue,#231 Patch for the cpython issue with Lock bpo-27585
2,pull_request_title,241,aio-libs,aioredis,pfreixes,2017-06-07 21:06:54,"Copied and adapted code from the PR pending to be merged yet [1]

[1] https://github.com/python/cpython/pull/1031",d15cb976c6ec57ec1f896db823ce277c7996e5d9,#231 Patch for the cpython issue with Lock bpo-27585
3,pull_request_merged,241,aio-libs,aioredis,popravich,2017-06-21 06:46:50,#231 Patch for the cpython issue with Lock bpo-27585,0c4c04c2bcffb7aa93310d26baa8ab0050b1baa5,Pull request merge from pfreixes/aioredis:cancelled_tasks_wake_up_next to aio-libs/aioredis:master
4,issue_comment,241,aio-libs,aioredis,codecov-io,2017-06-07 21:54:25,"# [Codecov](https://codecov.io/gh/aio-libs/aioredis/pull/241?src=pr&el=h1) Report
> Merging [#241](https://codecov.io/gh/aio-libs/aioredis/pull/241?src=pr&el=desc) into [master](https://codecov.io/gh/aio-libs/aioredis/commit/a9c386d525949bbd6d213e24b930ba0a102a1138?src=pr&el=desc) will **increase** coverage by `0.02%`.
> The diff coverage is `100%`.

[![Impacted file tree graph](https://codecov.io/gh/aio-libs/aioredis/pull/241/graphs/tree.svg?width=650&token=THCDhqngRB&height=150&src=pr)](https://codecov.io/gh/aio-libs/aioredis/pull/241?src=pr&el=tree)

```diff
@@            Coverage Diff             @@
##           master     #241      +/-   ##
==========================================
+ Coverage   96.97%   96.99%   +0.02%     
==========================================
  Files          55       57       +2     
  Lines        7492     7449      -43     
  Branches      625      587      -38     
==========================================
- Hits         7265     7225      -40     
+ Misses        168      167       -1     
+ Partials       59       57       -2
```


| [Impacted Files](https://codecov.io/gh/aio-libs/aioredis/pull/241?src=pr&el=tree) | Coverage Î” | |
|---|---|---|
| [tests/locks\_test.py](https://codecov.io/gh/aio-libs/aioredis/pull/241?src=pr&el=tree#diff-dGVzdHMvbG9ja3NfdGVzdC5weQ==) | `100% <100%> (Ã¸)` | |
| [aioredis/locks.py](https://codecov.io/gh/aio-libs/aioredis/pull/241?src=pr&el=tree#diff-YWlvcmVkaXMvbG9ja3MucHk=) | `100% <100%> (Ã¸)` | |
| [aioredis/sentinel/pool.py](https://codecov.io/gh/aio-libs/aioredis/pull/241?src=pr&el=tree#diff-YWlvcmVkaXMvc2VudGluZWwvcG9vbC5weQ==) | `86.71% <0%> (-3.43%)` | :arrow_down: |
| [aioredis/commands/pubsub.py](https://codecov.io/gh/aio-libs/aioredis/pull/241?src=pr&el=tree#diff-YWlvcmVkaXMvY29tbWFuZHMvcHVic3ViLnB5) | `95.85% <0%> (-0.36%)` | :arrow_down: |
| [tests/connection\_test.py](https://codecov.io/gh/aio-libs/aioredis/pull/241?src=pr&el=tree#diff-dGVzdHMvY29ubmVjdGlvbl90ZXN0LnB5) | `100% <0%> (Ã¸)` | :arrow_up: |
| [aioredis/sentinel/\_\_init\_\_.py](https://codecov.io/gh/aio-libs/aioredis/pull/241?src=pr&el=tree#diff-YWlvcmVkaXMvc2VudGluZWwvX19pbml0X18ucHk=) | `100% <0%> (Ã¸)` | :arrow_up: |
| [tests/pool\_test.py](https://codecov.io/gh/aio-libs/aioredis/pull/241?src=pr&el=tree#diff-dGVzdHMvcG9vbF90ZXN0LnB5) | `98.29% <0%> (+0.05%)` | :arrow_up: |
| [examples/py34/connection.py](https://codecov.io/gh/aio-libs/aioredis/pull/241?src=pr&el=tree#diff-ZXhhbXBsZXMvcHkzNC9jb25uZWN0aW9uLnB5) | `93.18% <0%> (+0.11%)` | :arrow_up: |
| ... and [2 more](https://codecov.io/gh/aio-libs/aioredis/pull/241?src=pr&el=tree-more) | |

------

[Continue to review full report at Codecov](https://codecov.io/gh/aio-libs/aioredis/pull/241?src=pr&el=continue).
> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)
> `Î” = absolute <relative> (impact)`, `Ã¸ = not affected`, `? = missing data`
> Powered by [Codecov](https://codecov.io/gh/aio-libs/aioredis/pull/241?src=pr&el=footer). Last update [a9c386d...d15cb97](https://codecov.io/gh/aio-libs/aioredis/pull/241?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).
",,
5,issue_comment,241,aio-libs,aioredis,pfreixes,2017-06-12 06:28:23,@popravich any interest in bake a minor release with that fix?,,
6,issue_comment,241,aio-libs,aioredis,pfreixes,2017-06-21 07:33:19,what about a minor release with that fix?,,
7,issue_comment,241,aio-libs,aioredis,argaen,2017-06-21 08:25:17,"+1, also interested on trying a version with the new fixes :)",,
8,issue_comment,241,aio-libs,aioredis,popravich,2017-06-21 08:49:58,"In the middle of a process, give me a moment)",,
9,issue_comment,241,aio-libs,aioredis,popravich,2017-06-21 09:59:44,New versions (`v1.0.0b1` and `v0.3.2`) have been released.,,
10,issue_comment,241,aio-libs,aioredis,pfreixes,2017-06-21 10:20:18,thanks !,,
11,pull_request_commit_comment,241,aio-libs,aioredis,popravich,2017-06-14 08:43:13,Why do you need two versions of Lock?,d15cb976c6ec57ec1f896db823ce277c7996e5d9,"(None, '', u'aioredis/locks.py')"
12,pull_request_commit_comment,241,aio-libs,aioredis,popravich,2017-06-14 08:43:37,*Lock.acquire,d15cb976c6ec57ec1f896db823ce277c7996e5d9,"(None, '', u'aioredis/locks.py')"
13,pull_request_commit_comment,241,aio-libs,aioredis,pfreixes,2017-06-14 21:12:07,"since Python 3.5 there were some small changes in that function, I've preferred to keep both versions separately to make it readable and of course, pass the tests with all Python 3 versions. ",d15cb976c6ec57ec1f896db823ce277c7996e5d9,"(None, '', u'aioredis/locks.py')"
14,pull_request_commit_comment,241,aio-libs,aioredis,popravich,2017-06-14 21:22:37,"well, that changes were actually fixing another cancellation issue https://github.com/python/asyncio/pull/393",d15cb976c6ec57ec1f896db823ce277c7996e5d9,"(None, '', u'aioredis/locks.py')"
15,pull_request_commit_comment,241,aio-libs,aioredis,pfreixes,2017-06-14 21:50:31,"yes, a shame of me. Take a look to the last commit, unified to a unique function that should be compatible with all Python versions and free of issues.",d15cb976c6ec57ec1f896db823ce277c7996e5d9,"(None, '', u'aioredis/locks.py')"
16,pull_request_commit,241,aio-libs,aioredis,pfreixes,2017-06-07 21:04:34,#231 Patch for the cpython issue with Lock,978cff53bb58aa16a8643b530ab51bf783586253,
17,pull_request_commit,241,aio-libs,aioredis,pfreixes,2017-06-07 21:54:11,Make Lock compatible with 3.3 and 3.4,40245354e643a678aaf09ee8c8ecb3a124a44f5c,
18,pull_request_commit,241,aio-libs,aioredis,pfreixes,2017-06-07 22:55:55,Changed test to make it compatible with python 3.3 version,253169d7f0f94cb0533f0f52f707ec373320d0b0,
19,pull_request_commit,241,aio-libs,aioredis,pfreixes,2017-06-07 22:56:56,Flake8 issue,2ac4a010c49aabf42c96f1eb29b7235f140cd09e,
20,pull_request_commit,241,aio-libs,aioredis,pfreixes,2017-06-08 06:49:49,"Increase coverage by reducing scope, test just the bugfix for 3.6",916a1f231d0044e2fe9be5d12a2e001a24f0d5ad,
21,pull_request_commit,241,aio-libs,aioredis,pfreixes,2017-06-14 21:48:57,One unique version of Lock.acquire function,eeaa146fdb2a5fa493328821090188db73435654,
22,pull_request_commit,241,aio-libs,aioredis,pfreixes,2017-06-16 11:34:53,Use create_future provided by aioredis,d15cb976c6ec57ec1f896db823ce277c7996e5d9,
0,issue_title,244,aio-libs,aioredis,pyup-bot,2017-06-09 23:00:15,"
There's a new version of [pytest-xdist](https://pypi.python.org/pypi/pytest-xdist) available.
You are currently using **1.16.0**. I have updated it to **1.17.0**



These links might come in handy:  <a href=""https://pypi.python.org/pypi/pytest-xdist"">PyPI</a> | <a href=""https://pyup.io/changelogs/pytest-xdist/"">Changelog</a> | <a href=""https://github.com/pytest-dev/pytest-xdist"">Repo</a> 



### Changelog
> 
>### 1.17.0

>------

>- fix 124: xdist would mark test as complete after &#39;call&#39; step. As a result,
>  xdist could identify the wrong test as failing when test crashes at teardown.
>  To address this issue, xdist now marks test as complete at teardown.







*Got merge conflicts? Close this PR and delete the branch. I'll create a new PR for you.*

Happy merging! ðŸ¤–
",start issue,Update pytest-xdist to 1.17.0
1,issue_closed,244,aio-libs,aioredis,pyup-bot,2017-06-10 14:00:22,,closed issue,Update pytest-xdist to 1.17.0
2,pull_request_title,244,aio-libs,aioredis,pyup-bot,2017-06-09 23:00:15,"
There's a new version of [pytest-xdist](https://pypi.python.org/pypi/pytest-xdist) available.
You are currently using **1.16.0**. I have updated it to **1.17.0**



These links might come in handy:  <a href=""https://pypi.python.org/pypi/pytest-xdist"">PyPI</a> | <a href=""https://pyup.io/changelogs/pytest-xdist/"">Changelog</a> | <a href=""https://github.com/pytest-dev/pytest-xdist"">Repo</a> 



### Changelog
> 
>### 1.17.0

>------

>- fix 124: xdist would mark test as complete after &#39;call&#39; step. As a result,
>  xdist could identify the wrong test as failing when test crashes at teardown.
>  To address this issue, xdist now marks test as complete at teardown.







*Got merge conflicts? Close this PR and delete the branch. I'll create a new PR for you.*

Happy merging! ðŸ¤–
",210e6aaf02a5e00a5212e1abd2dbd4a5f49ede33,Update pytest-xdist to 1.17.0
3,issue_comment,244,aio-libs,aioredis,pyup-bot,2017-06-10 14:00:21,Closing this in favor of #245,,
4,pull_request_commit,244,aio-libs,aioredis,pyup-bot,2017-06-09 23:00:14,Update pytest-xdist from 1.16.0 to 1.17.0,210e6aaf02a5e00a5212e1abd2dbd4a5f49ede33,
